<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Elemental Odyssey</title>
    <script>
      // CRITICAL FIX: Polyfill for PeerJS in Vite/Production
      if (typeof global === 'undefined') {
        window.global = window;
      }
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Inter:wght@400;600;800&display=swap');
      
      body {
        font-family: 'Inter', sans-serif;
        background-color: #020617; /* Slate 950 */
        color: #e2e8f0;
      }
      
      h1, h2, h3, .fantasy-font {
        font-family: 'Cinzel', serif;
      }

      /* Custom Scrollbar */
      .custom-scrollbar::-webkit-scrollbar {
        width: 6px;
      }
      .custom-scrollbar::-webkit-scrollbar-track {
        background: rgba(15, 23, 42, 0.5); 
      }
      .custom-scrollbar::-webkit-scrollbar-thumb {
        background: rgba(71, 85, 105, 0.5); 
        border-radius: 3px;
      }
      .custom-scrollbar::-webkit-scrollbar-thumb:hover {
        background: rgba(100, 116, 139, 0.8); 
      }

      /* --- UI Animations --- */
      @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-8px); }
      }
      .animate-float { animation: float 4s ease-in-out infinite; }

      @keyframes fade-in {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }
      .animate-fade-in { animation: fade-in 0.4s ease-out forwards; }

      /* --- Combat Animations --- */
      @keyframes damage-pop {
        0% { transform: scale(0.5) translateY(0); opacity: 0; }
        20% { transform: scale(1.5) translateY(-20px); opacity: 1; }
        100% { transform: scale(1) translateY(-60px); opacity: 0; }
      }
      .damage-number { animation: damage-pop 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }

      @keyframes shake {
        0%, 100% { transform: translate(0, 0); }
        25% { transform: translate(-4px, 4px); }
        50% { transform: translate(4px, -4px); }
        75% { transform: translate(-4px, -4px); }
      }
      .animate-shake { animation: shake 0.3s cubic-bezier(.36,.07,.19,.97) both; }

      @keyframes shake-hard {
        0% { transform: translate(0, 0) rotate(0); }
        20% { transform: translate(-8px, 8px) rotate(-3deg); }
        40% { transform: translate(8px, -8px) rotate(3deg); }
        60% { transform: translate(-6px, 4px) rotate(-2deg); }
        80% { transform: translate(4px, -4px) rotate(1deg); }
        100% { transform: translate(0, 0) rotate(0); }
      }
      .animate-shake-hard { animation: shake-hard 0.4s cubic-bezier(.36,.07,.19,.97) both; }

      /* --- VFX Particles --- */
      @keyframes particle-explode {
        0% { transform: translate(0, 0) scale(1.2); opacity: 1; }
        100% { transform: translate(var(--tx), var(--ty)) scale(0); opacity: 0; }
      }
      
      @keyframes particle-rise {
        0% { transform: translate(var(--ox), 20px) scale(0.5); opacity: 0; }
        50% { opacity: 1; }
        100% { transform: translate(var(--tx), -60px) scale(1.5); opacity: 0; }
      }

      @keyframes particle-spiral {
        0% { transform: rotate(0deg) translateX(0) scale(0.5); opacity: 1; }
        100% { transform: rotate(360deg) translateX(40px) scale(0); opacity: 0; }
      }

      @keyframes particle-rain {
        0% { transform: translate(var(--ox), -50px) scaleY(1); opacity: 0; }
        30% { opacity: 1; }
        100% { transform: translate(var(--ox), 50px) scaleY(2); opacity: 0; }
      }

      .particle {
        position: absolute;
        width: var(--size, 6px);
        height: var(--size, 6px);
        border-radius: 50%;
        pointer-events: none;
      }
      .particle-explode { animation: particle-explode 0.6s ease-out forwards; }
      .particle-rise { animation: particle-rise 1s ease-out forwards; }
      .particle-spiral { animation: particle-spiral 0.8s ease-out forwards; }
      .particle-rain { animation: particle-rain 0.5s linear forwards; }

      /* --- Skill Animations --- */
      @keyframes skill-slash {
        0% { width: 0; opacity: 0.5; transform: rotate(-45deg) translateX(-40px); }
        50% { width: 150px; opacity: 1; transform: rotate(-45deg) translateX(0); }
        100% { width: 150px; opacity: 0; transform: rotate(-45deg) translateX(60px); }
      }
      .vfx-slash { animation: skill-slash 0.3s ease-out forwards; }

      @keyframes skill-fire-pillar {
        0% { transform: scaleX(0.5) scaleY(0); opacity: 0; transform-origin: bottom; }
        20% { transform: scaleX(1.2) scaleY(1); opacity: 1; transform-origin: bottom; }
        100% { transform: scaleX(1) scaleY(1.5); opacity: 0; transform-origin: bottom; }
      }
      .vfx-fire-pillar { animation: skill-fire-pillar 0.6s ease-out forwards; }

      @keyframes skill-implode {
        0% { transform: scale(2); opacity: 0; }
        50% { transform: scale(0.1); opacity: 1; }
        70% { transform: scale(1.5); opacity: 1; }
        100% { transform: scale(2); opacity: 0; }
      }
      .vfx-implode { animation: skill-implode 0.6s ease-in-out forwards; }

      /* --- NEW ADVANCED VFX --- */
      @keyframes glitch-anim {
        0% { clip-path: inset(50% 0 30% 0); transform: translate(-2px, 2px); opacity: 0.8; }
        20% { clip-path: inset(10% 0 60% 0); transform: translate(2px, -2px); opacity: 1; }
        40% { clip-path: inset(80% 0 5% 0); transform: translate(-2px, 2px); opacity: 0.8; }
        60% { clip-path: inset(15% 0 40% 0); transform: translate(2px, -2px); opacity: 1; }
        80% { clip-path: inset(60% 0 20% 0); transform: translate(-1px, 1px); opacity: 0.8; }
        100% { clip-path: inset(0% 0 0% 0); transform: translate(0); opacity: 1; }
      }
      .animate-glitch {
        animation: glitch-anim 0.4s infinite linear alternate-reverse;
      }
      
      @keyframes nuke-expand {
        0% { transform: scale(0); opacity: 1; }
        50% { transform: scale(5); opacity: 1; }
        100% { transform: scale(8); opacity: 0; }
      }
      .animate-nuke { animation: nuke-expand 0.8s ease-out forwards; }

      @keyframes tsunami-wave {
        0% { transform: translateX(100px) scaleY(0.2); opacity: 0; }
        30% { transform: translateX(0) scaleY(1.2); opacity: 1; }
        100% { transform: translateX(-100px) scaleY(0.5); opacity: 0; }
      }
      .animate-tsunami { animation: tsunami-wave 0.8s ease-out forwards; }

      @keyframes void-pulse {
        0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(0, 0, 0, 0.7); }
        50% { transform: scale(0.95); box-shadow: 0 0 50px 20px rgba(76, 29, 149, 0.5); }
        100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(0, 0, 0, 0); }
      }
      .animate-void { animation: void-pulse 1s infinite; }

      /* --- Prestige Effects --- */
      @keyframes rainbow-border {
        0% { border-color: #ef4444; }
        20% { border-color: #f59e0b; }
        40% { border-color: #10b981; }
        60% { border-color: #3b82f6; }
        80% { border-color: #8b5cf6; }
        100% { border-color: #ef4444; }
      }
      .prestige-border {
        border-width: 3px;
        animation: rainbow-border 3s linear infinite;
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.3",
    "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
    "react/": "https://esm.sh/react@^19.2.3/",
    "peerjs": "https://esm.sh/peerjs@^1.5.5",
    "lucide-react": "https://esm.sh/lucide-react@^0.562.0",
    "@vitejs/plugin-react": "https://esm.sh/@vitejs/plugin-react@^5.1.2",
    "vite": "https://esm.sh/vite@^7.3.0"
  }
}
</script>
</head>
  <body>
    <div id="root"></div>
    <script type="module" src="./index.tsx"></script>
  </body>
</html>